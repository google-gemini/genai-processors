<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>DR Widget</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css" crossorigin="anonymous">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js" crossorigin="anonymous"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              gray: {
                850: "#1f2937",
                950: "#030712",
              },
              primary: {
                500: "#6366f1",
                600: "#4f46e5",
              },
            },
            animation: {
              "pulse-fast": "pulse 1.5s cubic-bezier(0.4, 0, 0.6, 1) infinite",
              "fade-in-up": "fadeInUp 0.3s ease-out forwards",
            },
            keyframes: {
              fadeInUp: {
                "0%": { opacity: "0", transform: "translateY(10px)" },
                "100%": { opacity: "1", transform: "translateY(0)" },
              },
            },
          },
        },
      };
    </script>
    <style>
      body {
        background-color: #030712;
        color: #f3f4f6;
      }
      ::-webkit-scrollbar {
        width: 8px;
        height: 8px;
      }
      ::-webkit-scrollbar-track {
        background: #111827;
      }
      ::-webkit-scrollbar-thumb {
        background: #374151;
        border-radius: 4px;
      }
      ::-webkit-scrollbar-thumb:hover {
        background: #4b5563;
      }
      .hidden-force {
        display: none !important;
      }
    </style>
  </head>
  <body class="min-h-screen py-2 px-4 md:py-4 md:px-8 font-sans">
    <div class="mx-auto flex flex-col h-[calc(100vh-1rem)] md:h-[calc(100vh-2rem)]">
      <!-- Header -->
      <header class="mb-3 text-center md:text-left flex justify-between items-center">
        <h1
          class="text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-primary-500 to-purple-500"
        >
          DR Widget
        </h1>
        <div class="flex items-center gap-3">
            <div
              id="status-dot"
              class="w-2.5 h-2.5 rounded-full bg-gray-500 transition-all duration-300"
            ></div>
            <span
              id="status-text"
              class="text-gray-300 font-medium uppercase text-xs tracking-wider"
            >
              DISCONNECTED
            </span>
             <button
                id="btn-connect"
                type="button"
                class="px-4 py-1.5 bg-primary-600 hover:bg-primary-500 text-white rounded-lg transition-all text-sm font-bold disabled:opacity-50"
              >
                Connect
              </button>
             <button
                id="btn-disconnect"
                type="button"
                class="hidden px-4 py-1.5 bg-red-600 hover:bg-red-500 text-white rounded-lg transition-all text-sm font-bold"
              >
                Disconnect
              </button>
        </div>
      </header>

      <!-- Main Workspace Grid -->
      <div class="flex-1 grid grid-cols-1 lg:grid-cols-5 gap-6 min-h-0">
        <!-- Left Column: Chat -->
        <div
          class="lg:col-span-4 flex flex-col h-full bg-gray-800 rounded-xl border border-gray-700 overflow-hidden shadow-lg"
        >
          <!-- Chat Area -->
          <div id="chat-scroll-area" class="flex-1 overflow-y-auto p-4 space-y-4">
            <div id="chat-container"></div>
          </div>

          <!-- Input Area -->
          <div class="bg-gray-900 p-4 border-t border-gray-700">
            <form id="chat-form" class="flex gap-4">
              <input
                id="message-input"
                type="text"
                class="flex-1 bg-gray-800 border border-gray-700 text-white px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 transition-all placeholder-gray-500 disabled:opacity-50 disabled:cursor-not-allowed"
                placeholder="Connect to server to chat..."
                autocomplete="off"
                disabled
              />
              <button
                type="submit"
                class="px-6 py-3 bg-primary-600 hover:bg-primary-500 text-white rounded-lg font-bold transition-all shadow-lg hover:shadow-primary-500/30 disabled:opacity-50 disabled:cursor-not-allowed"
                id="btn-send"
                disabled
              >
                Send
              </button>
            </form>
          </div>
        </div>

        <!-- Right Column: Settings -->
        <div class="lg:col-span-1 border border-gray-800 rounded-xl bg-gray-900/30 p-4 flex flex-col gap-4">
            <h2 class="text-xl font-bold text-white flex items-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                </svg>
                Settings
            </h2>
            <div class="bg-gray-800/50 p-4 rounded-lg border border-gray-700">
                <label class="block text-xs text-gray-500 font-bold uppercase tracking-wider mb-2">
                    Server URL
                </label>
                <input
                    id="url-input"
                    type="text"
                    value="ws://localhost:8765"
                    class="w-full bg-gray-900 border border-gray-700 text-white px-4 py-2 rounded-lg text-sm font-mono focus:outline-none focus:ring-2 focus:ring-primary-500"
                    placeholder="ws://localhost:8765"
                />
            </div>
        </div>
      </div>
    </div>
  </body>
</html>
